<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>API and additional features | Userspace-Arduino for CFA10036</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.2">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="crystalfontz">
    
    
    <link rel="next" href="../gpio/demo.html" />
    
    
    <link rel="prev" href="../gpio/specifications.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="crystalfontz/Userspace-Arduino" data-level="6.2" data-basepath=".." data-revision="1407774863590">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/crystalfontz/Userspace-Arduino" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/crystalfontz/Userspace-Arduino/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/crystalfontz/Userspace-Arduino/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Userspace-Arduino for CFA10036</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/crystalfontz" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/crystalfontz/Userspace-Arduino/issues" target="blank"class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/crystalfontz/Userspace-Arduino/edit/master/gpio/api_and_additional_features.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="hardware_overview/README.html">
            
            <a href="../hardware_overview/README.html">
                <i class="fa fa-check"></i> <b>1.</b> Hardware Overview
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="getting_started/README.html">
            
            <a href="../getting_started/README.html">
                <i class="fa fa-check"></i> <b>2.</b> Getting Started
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="running_custom_sketches/README.html">
            
            <a href="../running_custom_sketches/README.html">
                <i class="fa fa-check"></i> <b>3.</b> Running Custom Sketches
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="debugging_an_application/README.html">
            
            <a href="../debugging_an_application/README.html">
                <i class="fa fa-check"></i> <b>4.</b> Debugging an Application
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="known_issues/README.html">
            
            <a href="../known_issues/README.html">
                <i class="fa fa-check"></i> <b>5.</b> Exceptions &amp; Known Issues
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="gpio/README.html">
            
            <a href="../gpio/README.html">
                <i class="fa fa-check"></i> <b>6.</b> GPIO
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="gpio/specifications.html">
            
            <a href="../gpio/specifications.html">
                <i class="fa fa-check"></i> <b>6.1.</b> Specifications
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="gpio/api_and_additional_features.html">
            
            <a href="../gpio/api_and_additional_features.html">
                <i class="fa fa-check"></i> <b>6.2.</b> API and additional features
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="gpio/demo.html">
            
            <a href="../gpio/demo.html">
                <i class="fa fa-check"></i> <b>6.3.</b> Demo
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="spi/README.html">
            
            <a href="../spi/README.html">
                <i class="fa fa-check"></i> <b>7.</b> SPI
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="spi/specifications.html">
            
            <a href="../spi/specifications.html">
                <i class="fa fa-check"></i> <b>7.1.</b> Specifications
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="spi/api_and_additional_featuers.html">
            
            <a href="../spi/api_and_additional_featuers.html">
                <i class="fa fa-check"></i> <b>7.2.</b> API and additional featuers
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="spi/demo.html">
            
            <a href="../spi/demo.html">
                <i class="fa fa-check"></i> <b>7.3.</b> Demo
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="pwm/README.html">
            
            <a href="../pwm/README.html">
                <i class="fa fa-check"></i> <b>8.</b> PWM
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="pwm/specifications.html">
            
            <a href="../pwm/specifications.html">
                <i class="fa fa-check"></i> <b>8.1.</b> Specifications
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="pwm/api_and_additional_features.html">
            
            <a href="../pwm/api_and_additional_features.html">
                <i class="fa fa-check"></i> <b>8.2.</b> API and additional features
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="pwm/demo.html">
            
            <a href="../pwm/demo.html">
                <i class="fa fa-check"></i> <b>8.3.</b> Demo
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="i2c/README.html">
            
            <a href="../i2c/README.html">
                <i class="fa fa-check"></i> <b>9.</b> I2C (wire)
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="i2c/specifications.html">
            
            <a href="../i2c/specifications.html">
                <i class="fa fa-check"></i> <b>9.1.</b> Specifications
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="serial/README.html">
            
            <a href="../serial/README.html">
                <i class="fa fa-check"></i> <b>10.</b> Serial
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="serial/specifications.html">
            
            <a href="../serial/specifications.html">
                <i class="fa fa-check"></i> <b>10.1.</b> Specifications
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="analog/README.html">
            
            <a href="../analog/README.html">
                <i class="fa fa-check"></i> <b>11.</b> Analog
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1" data-path="analog/specification.html">
            
            <a href="../analog/specification.html">
                <i class="fa fa-check"></i> <b>11.1.</b> Specification
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 34.78260869565217%;min-width: 30.434782608695652%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../hardware_overview/README.html" title="Hardware Overview" class="chapter done new-chapter" data-progress="1" style="left: 4.3478260869565215%;"></a>
    
        <a href="../getting_started/README.html" title="Getting Started" class="chapter done new-chapter" data-progress="2" style="left: 8.695652173913043%;"></a>
    
        <a href="../running_custom_sketches/README.html" title="Running Custom Sketches" class="chapter done new-chapter" data-progress="3" style="left: 13.043478260869565%;"></a>
    
        <a href="../debugging_an_application/README.html" title="Debugging an Application" class="chapter done new-chapter" data-progress="4" style="left: 17.391304347826086%;"></a>
    
        <a href="../known_issues/README.html" title="Exceptions &amp; Known Issues" class="chapter done new-chapter" data-progress="5" style="left: 21.73913043478261%;"></a>
    
        <a href="../gpio/README.html" title="GPIO" class="chapter done new-chapter" data-progress="6" style="left: 26.08695652173913%;"></a>
    
        <a href="../gpio/specifications.html" title="Specifications" class="chapter done " data-progress="6.1" style="left: 30.434782608695652%;"></a>
    
        <a href="../gpio/api_and_additional_features.html" title="API and additional features" class="chapter done " data-progress="6.2" style="left: 34.78260869565217%;"></a>
    
        <a href="../gpio/demo.html" title="Demo" class="chapter  " data-progress="6.3" style="left: 39.130434782608695%;"></a>
    
        <a href="../spi/README.html" title="SPI" class="chapter  new-chapter" data-progress="7" style="left: 43.47826086956522%;"></a>
    
        <a href="../spi/specifications.html" title="Specifications" class="chapter  " data-progress="7.1" style="left: 47.82608695652174%;"></a>
    
        <a href="../spi/api_and_additional_featuers.html" title="API and additional featuers" class="chapter  " data-progress="7.2" style="left: 52.17391304347826%;"></a>
    
        <a href="../spi/demo.html" title="Demo" class="chapter  " data-progress="7.3" style="left: 56.52173913043478%;"></a>
    
        <a href="../pwm/README.html" title="PWM" class="chapter  new-chapter" data-progress="8" style="left: 60.869565217391305%;"></a>
    
        <a href="../pwm/specifications.html" title="Specifications" class="chapter  " data-progress="8.1" style="left: 65.21739130434783%;"></a>
    
        <a href="../pwm/api_and_additional_features.html" title="API and additional features" class="chapter  " data-progress="8.2" style="left: 69.56521739130434%;"></a>
    
        <a href="../pwm/demo.html" title="Demo" class="chapter  " data-progress="8.3" style="left: 73.91304347826087%;"></a>
    
        <a href="../i2c/README.html" title="I2C (wire)" class="chapter  new-chapter" data-progress="9" style="left: 78.26086956521739%;"></a>
    
        <a href="../i2c/specifications.html" title="Specifications" class="chapter  " data-progress="9.1" style="left: 82.6086956521739%;"></a>
    
        <a href="../serial/README.html" title="Serial" class="chapter  " data-progress="10" style="left: 86.95652173913044%;"></a>
    
        <a href="../serial/specifications.html" title="Specifications" class="chapter  " data-progress="10.1" style="left: 91.30434782608695%;"></a>
    
        <a href="../analog/README.html" title="Analog" class="chapter  " data-progress="11" style="left: 95.65217391304348%;"></a>
    
        <a href="../analog/specification.html" title="Specification" class="chapter  " data-progress="11.1" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_1242">
                    
                        <h1 id="gpio-api">GPIO API</h1>
<hr>
<p><strong>syntax</strong></p>
<ul>
<li>pinMode (pin,mode)</li>
<li>digitalRead (pin)</li>
<li>digitalWrite (pin, value)</li>
</ul>
<p><strong>parameters</strong></p>
<ul>
<li><strong>pin:</strong> pin no of digital pin as per Arduino Uno board</li>
<li><strong>mode:</strong> INPUT or OUTPUT (INPUT_PULLUP is not available)</li>
<li><strong>value:</strong> HIGH or LOW</li>
</ul>
<pre><code>NOTE:
* Do not connect more than 3.3V source to Digital pins
* Digital pin provides maximum 3.3V output only
* Do not use PWM and Analog pins as GPIO pins
</code></pre><h4 id="additional-features">Additional features</h4>
<p>CFA10036 has plentiful of GPIOs, while Arduino Uno has six.
By default only six pins are enabled (to maintain the compability with Arduino Uno). Do the following to use extra GPIOs.</p>
<h4 id="enable-extra-gpios">Enable extra GPIOs</h4>
<p>You need to make two changes.</p>
<p>1.Open following file using your favourite text editor:</p>
<pre><code>Userspace-Arduino/libarduino/variants/cfa10036/variant.cpp
</code></pre><p>Before adding GPIO pin(s) make sure that the pin(s) is configured as GPIO only in the device tree.
Add <code>{sysfs_gpio_no, Uno_pin_no}</code> in g_AGPIODescription structure. where <strong>sysfs_gpio_no</strong> is gpio associated with sysfs and <strong>Uno_pin_no</strong> is an extra pin number assigned by you.</p>
<p>For example to use <strong>P3.14</strong> in Userspace-Arduino,</p>
<pre><code class="lang-cpp">GPIODescription g_AGPIODescription[] = {
    { <span class="hljs-number">102</span> , <span class="hljs-number">2</span>},
    { <span class="hljs-number">103</span> , <span class="hljs-number">4</span>},
    { <span class="hljs-number">104</span> , <span class="hljs-number">7</span>},
    { <span class="hljs-number">105</span> , <span class="hljs-number">10</span>},
    { <span class="hljs-number">108</span> , <span class="hljs-number">11</span>},
    { <span class="hljs-number">109</span> , <span class="hljs-number">13</span>},
    { <span class="hljs-number">110</span> , <span class="hljs-number">15</span>}         <span class="hljs-comment">// added GPIO pin P3.14</span>
};
</code></pre>
<p>For P3.14 sysfs gpio no will be 32*3 + 14.</p>
<p>Formula to calculate PX.Y sysfs gpio no = (32*X + Y)</p>
<p><code>NOTE: You must assign Uno_pin_no greater than 15. Pin 0 to 13 are reserved for Arduino Uno board. For more details refer Arduino Uno pin functions</code></p>
<p>2.Open following file using your favourite test editor:</p>
<pre><code>Userspace-Arduino/libarduino/variants/cfa10036/pins_linux.h
</code></pre><p>Add the pin no you want to assign in following macro (15 in this example):</p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#define isDigital(p) ((p) == 2 || (p) == 4 || (p) == 7 || (p) == 10 || (p) == 11 || (p) == 13 || (p) == 15)</span>
</code></pre>
<p><code>NOTE: Make sure assigned pin number does not conflict with other pins</code></p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../gpio/specifications.html" class="navigation navigation-prev " aria-label="Previous page: Specifications"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../gpio/demo.html" class="navigation navigation-next " aria-label="Next page: Demo"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
